#!/bin/bash

# It turns out I'm not really any good at shell scripting.

PROJECT_ROOT="$2" || "$PWD"

if [ -r "bin/corkscrew" ]; then
  CLASSPATH=src/:dependencies/
else
  CLASSPATH=$HOME/.corkscrew/corkscrew.jar
fi

case $1 in
    build)   CLASS=cork.screw.build;;
    deps)    CLASS=cork.screw.deps;;
    install) CLASS=cork.screw.install;;
    repl)    CLASS=clojure.lang.Repl;;
    # else?
esac

exec java -cp $CLASSPATH $CLASS ${@:2}